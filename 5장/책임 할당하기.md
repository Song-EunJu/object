## 5장 : 책임 할당하기

### 책임주도 설계

- `책임` (이 객체가 수행해야 하는 행동) 을 먼저 결정한 후에 객체의 `상태`를 결정
- 객체 입장에서 책임이 어색해보여도, 협력에 적합하다면 그 책임은 좋은 책임
    - **책임은** 객체의 입장이 아니라, **객체가 참여하는 협력에 적합해야 한다**
    - 협력에 적합한 책임 == `메시지 전송자`에게 적합한 책임
    - 메시지 전송하는 클라이언트의 의도에 적합한 책임을 할당해라
- 메시지 전송자는 어떤 객체가 메시지 수신자가 될지 알지 못하기 때문에, 전송자 입장에서는 수신자가 캡슐화됨
    - 누군가가 수신할거라는 걸 믿고 자신의 의도를 표현한 메시지를 전송할 뿐

### GRASP 패턴

- GRASP : General Responsibiltiy Assignment Software Pattern
    - 객체에게 책임을 할당할 때 지침으로 삼을 수 있는 원칙들의 집합

### **책임을 할당해야 할 때 고민해야 하는 후보들**

1. **도메인 개념**
    - 설계를 시작하기 위해 참고할 수 있는 개념들의 모음 정도로 생각하자
      
2. **정보 전문가**
    - 애플리케이션이 **제공해야 하는 기능 == 책임**이라고 생각하자<br>
        ex) 제공해야 하는 기능 == 영화 예매 <br>
        → 애플리케이션은 **영화 예매할 책임이 존재**<br>
    - 메시지는, **수신객체가 아니라 전송객체의 의도를 반영**해서 결정해야 함<br>
        Q1. **메시지를 전송하는 객체는 무엇을 원하는가?**  <br>
        A. 영화 예매 <br>
        → 메시지 이름 “예매하라” <br>
        ( 협력을 시작하는 객체가 미정인 상태로 시작됨 )
        
        Q2. **메시지 수신할 적합한 객체는 무엇인가?** <br>
        A. 책임을 수행할 정보를 알고있는 객체 == INFORMATION EXPERT (정보 전문가) <br>
        - 정보를 알고 있는 객체만이, 책임을 **`어떻게`** 수행할지 스스로 결정 가능
        - 객체가 자율적인 존재여야 함을 상기시킴
        - 정보를 알고 있다고 해서, 정보를 저장할 필요는 없음. 
여기서 정보는 데이터랑 다름 !!!!!!!!!!
        <br>
        
        - 1번 메시지 : 예매하라
            - 영화 예매에 필요한 정보를 가장 많이 아는 `상영` 에게 책임 할당
            - ‘예매하라’ 메시지 완료를 위해서는 ‘예매 가격 계산’ 필요
            - `상영` 은 가격 계산 정보를 모르기 때문에, 가격계산이 상영 객체가 원하는 바임.
            “가격을 계산하라” 라는 메시지 전송
        - 2번 메시지 : 가격을 계산하라
            - 가격을 계산하는 데 정보를 가장 많이 아는 `영화` 에게 책임 할당
            - ‘가격을 계산하라’ 메시지 완료를 위해서는 ‘할인조건에 따라 할인 여부를 판단하는 작업` 필요
            - `영화` 는 할인 조건에 대한 정보를 모르기 때문에 할인 여부를 판단할 수 없어서, 할인 조건에 대한 작업이 `영화` 객체가 원하는 바임. “할인 여부를 판단하라” 메시지 전송
        - 3번 메시지 : 할인 여부를 판단하라
            - `할인조건` 은 외부의 도움 없이, 자신의 데이터만으로 메시지 처리 가능

              
3. **낮은 결합도 ( Low Coupling ) / 높은 응집도 ( High Cohesion )**
    - 여러 설계 대안이 있을 때는, 낮은 결합도 / 높은 응집도를 유지할 수 있는 설계를 선택하라

4. **창조자 ( Creator )**
    - 객체를 생성할 책임을, 어떤 객체에게 할당할지에 대한 지침을 제공하는 패턴
    == 생성되는 객체와 연결되거나 **관련되는 객체에 해당 객체 생성 책임을 맡기는 것**
    - 아래 조건을 가장 많이 만족하는 객체에게 A 객체 생성 책임을 할당하라
        - B 가 A 객체를 포함하거나 참조
        - B 가 A 객체 기록
        - B가 A 객체 긴밀하게 사용
        - B가 A 객체 초기화하는데 필요한 데이터를 가짐
