## 3장 : 역할, 책임, 협력

- **협력** : 객체들이 애플리케이션의 기능을 구현하기 위해 수행하는 상호작용
    ex) 손님은 커피를 주문하고, 바리스타는 손님이 주문한 커피를 만든다.
    
- **책임** : 협력에 참여하기 위해 수행하는 로직
    ex) 손님은 메뉴를 주문한다 
    
- **역할 :** 객체들이 협력 안에서 수행하는 책임들이 모여 객체가 수행하는 역할을 구성

### 협력

- 객체지향 세계에서 기능을 구현할 수 있는 유일한 방법
- 객체 사이의 협력은, 하나의 객체가 다른 객체에게 도움을 요청할 때 시작됨
- `메시지 전송` : 객체 사이의 협력을 위해 사용할 수 있는 유일한 커뮤니케이션 수단
    - 메시지 수신 객체는 `메소드` 를 실행해서 요청에 응답
    - 외부의 객체는 **오직 메시지만 전송**하고, 메시지 처리방식은 **메시지 수신 객체가 직접 결정**함
        
        > Screening 클래스에 movie.calculate() 이 있으면, Screening 이 **Movie 의 calculate 메소드를 호출한다**, 라고 말했지만
        사실은 Screening 이 **Movie 에게 calculate 메시지를 전송한다**. 가 적절한 표현
        > 
    - Screening 이 Movie 에게 처리를 위임하는 이유는, 요금 계산을 위한 데이터를 가장 잘 아는 것이 Movie 이기 때문<br>
    → 만약 Screening 이 처리하게 된다면 Movie 의 **내부 구현에 결합되어** Movie 의 **자율성이 훼손**됨
        - 객체의 자율성을 보장하려면, 필요한 정보(데이터) 와 정보에 기반한 행동(메소드) 를 같은 객체 안에 모아두어야 함
        - Movie 가 자율적 존재가 되려면, 자신이 알고 있는 정보를 이용해 직접 요금을 계산해야 함 
        (Screening 과 Movie 사이의 결합도를 느슨하게 유지 가능)
    - 객체를 자율적으로 만드는 가장 기본적인 방법은, `내부 구현의 캡슐화` 임
        - 캡슐화 → 변경에 대한 파급 효과 제한 → 변경에 용이

### 설계를 위한 문맥을 결정하는, 협력

- 객체가 협력에 참여할 수 있는 이유는, **협력에 필요한 적절한 행동을 보유하고 있기 때문**<br>
    → 객체의 행동을 결정하는 것 == 객체가 참여하고 있는 협력
- Movie 객체가 play() - 상영 이라는 행동을 수행해야 할 것 같지만, [영화를 예매하기 위한 협력] 에 참여하고 있기에, Movie 에는 요금을 계산하는 행동과 관련된 메소드들만 존재함
    - Movie 의 행동을 결정하는 것 == 영화 예매를 위한 협력
    - **협력이라는 문맥을 고려하지 않고 Movie 의 행동 결정하는 것은 의미가 없다**
- 객체의 상태는 그 객체가 **`행동을 수행하는데 필요한 정보가 무엇인지`** 로 결정됨<br>
    ex) Movie 가 요금계산을 하기 위해 필요한 fee, DiscountPolicy 인스턴스 변수를 상태의 일부로 가짐
- `상태` : 객체가 행동하는 데 필요한 정보에 의해 결정
- `행동` : 협력 안에서 객체가 처리할 메시지로 결정
    - 협력은 객체를 설계하는 데 필요한 일종의 `문맥` 제공
